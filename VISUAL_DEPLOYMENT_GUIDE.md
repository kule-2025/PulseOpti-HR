# 可视化部署指南 - 图解版

## 🗺️ 总体流程图

```
┌─────────────────────────────────────────────────────────────────┐
│                         准备阶段                                 │
└─────────────────────────────────────────────────────────────────┘
                              ↓
    ┌─────────────────┐      ┌─────────────────┐      ┌─────────────────┐
    │ Windows 10/11   │  +   │ Node.js 18+     │  +   │ pnpm 已安装     │
    └─────────────────┘      └─────────────────┘      └─────────────────┘
                              ↓
┌─────────────────────────────────────────────────────────────────┐
│                         进入项目目录                              │
│                                                                 │
│  cd C:\path\to\PulseOpti-HR                                     │
│                                                                 │
│  📁 PulseOpti-HR/                                               │
│     ├── deploy-admin-to-vercel.bat  ← 脚本文件                   │
│     ├── deploy-admin-to-vercel.ps1                              │
│     ├── package.json                                            │
│     └── ...                                                     │
└─────────────────────────────────────────────────────────────────┘
                              ↓
┌─────────────────────────────────────────────────────────────────┐
│                         执行脚本                                 │
│                                                                 │
│  方式 1：双击运行                                                │
│  ┌──────────────────┐                                           │
│  │ deploy-admin-    │  ← 双击这个文件                          │
│  │ to-vercel.bat    │                                           │
│  └──────────────────┘                                           │
│                                                                 │
│  方式 2：CMD 运行                                               │
│  ┌─────────────────────────────────────────────────┐            │
│  │ C:\path\to\PulseOpti-HR> deploy-admin-to-      │            │
│  │ vercel.bat                                      │            │
│  └─────────────────────────────────────────────────┘            │
│                                                                 │
│  方式 3：PowerShell 运行                                        │
│  ┌─────────────────────────────────────────────────┐            │
│  │ PS C:\path\to\PulseOpti-HR> .\deploy-admin-    │            │
│  │ to-vercel.ps1                                   │            │
│  └─────────────────────────────────────────────────┘            │
└─────────────────────────────────────────────────────────────────┘
                              ↓
┌─────────────────────────────────────────────────────────────────┐
│                    脚本自动执行（5-10分钟）                       │
└─────────────────────────────────────────────────────────────────┘
                              ↓
    ┌──────────────┐    ┌──────────────┐    ┌──────────────┐
    │ 步骤 1       │ →  │ 步骤 2       │ →  │ 步骤 3       │
    │ 检查 Vercel  │    │ 登录 Vercel  │    │ 获取数据库   │
    │ CLI          │    │              │    │ 连接         │
    └──────────────┘    └──────────────┘    └──────────────┘
                              ↓
    ┌──────────────┐    ┌──────────────┐    ┌──────────────┐
    │ 步骤 4       │ →  │ 步骤 5       │ →  │ 步骤 6       │
    │ 部署超管端   │    │ 配置环境     │    │ 添加域名     │
    │              │    │ 变量         │    │              │
    └──────────────┘    └──────────────┘    └──────────────┘
                              ↓
                    ┌──────────────┐
                    │ 步骤 7       │
                    │ 重新部署     │
                    └──────────────┘
                              ↓
┌─────────────────────────────────────────────────────────────────┐
│                    配置 DNS 记录                                 │
│                                                                 │
│  登录域名注册商控制台                                            │
│           ↓                                                      │
│  找到域名 aizhixuan.com.cn                                       │
│           ↓                                                      │
│  添加 DNS 记录：                                                  │
│                                                                 │
│  ┌─────────────────────────────────────────────────┐            │
│  │ 类型：     CNAME                                 │            │
│  │ 主机记录： admin                                 │            │
│  │ 记录值：   cname.vercel-dns.com                  │            │
│  │ TTL：      600                                   │            │
│  └─────────────────────────────────────────────────┘            │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
                              ↓
┌─────────────────────────────────────────────────────────────────┐
│                    等待 DNS 生效（5-10分钟）                     │
│                                                                 │
│  ⏳ 等待中...                                                    │
│                                                                 │
│  检查 DNS 生效：                                                 │
│  nslookup admin.aizhixuan.com.cn                                │
│                                                                 │
│  预期输出：                                                       │
│  ┌─────────────────────────────────────────────────┐            │
│  │ 名称:    admin.aizhixuan.com.cn                 │            │
│  │ Address: xxx.xxx.xxx.xxx                        │            │
│  │ Aliases: cname.vercel-dns.com                   │            │
│  └─────────────────────────────────────────────────┘            │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
                              ↓
┌─────────────────────────────────────────────────────────────────┐
│                    验证部署                                      │
│                                                                 │
│  1️⃣  访问超管端                                                   │
│      https://admin.aizhixuan.com.cn                             │
│                ↓                                                 │
│      预期：显示登录页面                                          │
│                                                                 │
│  2️⃣  创建管理员账号                                               │
│      https://admin.aizhixuan.com.cn/register                    │
│                ↓                                                 │
│      邮箱：208343256@qq.com                                     │
│      密码：admin123                                             │
│                ↓                                                 │
│      预期：注册成功                                              │
│                                                                 │
│  3️⃣  登录管理员账号                                               │
│      https://admin.aizhixuan.com.cn/login                       │
│                ↓                                                 │
│      预期：登录成功，显示仪表盘                                   │
│                                                                 │
│  4️⃣  测试数据同步                                                 │
│      在前端注册 → 在超管端查看                                   │
│                ↓                                                 │
│      预期：数据实时同步                                          │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
                              ↓
                         ✅ 部署完成
```

---

## 🖼️ 步骤 1：找到脚本文件

```
文件资源管理器视图：

📁 PulseOpti-HR
  📄 deploy-admin-to-vercel.bat    ← 就是这个！
  📄 deploy-admin-to-vercel.ps1
  📄 verify-data-sync.bat
  📄 package.json
  📄 src/
  📄 public/
  📁 node_modules/
  📄 ...

操作：双击 deploy-admin-to-vercel.bat 文件
```

---

## 🖼️ 步骤 2：Vercel 登录流程

```
脚本执行流程：

┌─────────────────────────────────────┐
│ 检查 Vercel CLI                     │
│ ✅ 已安装                           │
└─────────────────────────────────────┘
               ↓
┌─────────────────────────────────────┐
│ 检查登录状态                         │
│ ⚠️  需要登录                        │
└─────────────────────────────────────┘
               ↓
┌─────────────────────────────────────┐
│ 自动打开浏览器                       │
│                                     │
│  ┌──────────────────────────┐       │
│  │   Vercel Login Page      │       │
│  │                          │       │
│  │  [Continue with GitHub]  │       │
│  │  [Continue with GitLab]  │       │
│  │  [Continue with Email]   │       │
│  └──────────────────────────┘       │
└─────────────────────────────────────┘
               ↓
┌─────────────────────────────────────┐
│ 选择登录方式                         │
│                                     │
│  推荐：使用 GitHub 或 Email          │
└─────────────────────────────────────┘
               ↓
┌─────────────────────────────────────┐
│ 授权登录                             │
│                                     │
│  ┌──────────────────────────┐       │
│  │   Vercel Authorization   │       │
│  │                          │       │
│  │  [Authorize]             │       │
│  └──────────────────────────┘       │
└─────────────────────────────────────┘
               ↓
┌─────────────────────────────────────┐
│ 登录成功                             │
│ ✅ 已登录                           │
└─────────────────────────────────────┘
               ↓
      继续执行后续步骤
```

---

## 🖼️ 步骤 3：DNS 配置（腾讯云）

```
腾讯云 DNS 配置流程：

1. 访问腾讯云控制台
   https://console.cloud.tencent.com/cns

2. 找到域名
   ┌─────────────────────────────────────┐
   │ aizhixuan.com.cn                    │
   │ [解析]                              │
   └─────────────────────────────────────┘

3. 点击"解析"
   ┌─────────────────────────────────────┐
   │ DNS 解析                            │
   │                                     │
   │ [添加记录]                          │
   └─────────────────────────────────────┘

4. 填写记录信息
   ┌─────────────────────────────────────┐
   │ 添加记录                            │
   │                                     │
   │ 主机记录: [admin        ]          │
   │ 记录类型: [CNAME       ▼]          │
   │ 线路类型: [默认        ▼]          │
   │ 记录值:   [cname.vercel-          │
   │            dns.com      ]          │
   │ TTL:      [600         ▼]          │
   │                                     │
   │ [保存]                              │
   └─────────────────────────────────────┘

5. 保存成功
   ┌─────────────────────────────────────┐
   │ ✅ 添加成功                         │
   │                                     │
   │ DNS 解析列表：                       │
   │ ┌─────────────────────────────┐    │
   │ │ admin  | CNAME | cname... │    │
   │ └─────────────────────────────┘    │
   └─────────────────────────────────────┘
```

---

## 🖼️ 步骤 4：DNS 配置（阿里云）

```
阿里云 DNS 配置流程：

1. 访问阿里云控制台
   https://dns.console.aliyun.com/

2. 找到域名
   ┌─────────────────────────────────────┐
   │ aizhixuan.com.cn                    │
   │ [解析设置]                          │
   └─────────────────────────────────────┘

3. 点击"解析设置"
   ┌─────────────────────────────────────┐
   │ 解析设置                            │
   │                                     │
   │ [添加记录]                          │
   └─────────────────────────────────────┘

4. 填写记录信息
   ┌─────────────────────────────────────┐
   │ 添加记录                            │
   │                                     │
   │ 记录类型: [CNAME       ▼]          │
   │ 主机记录: [admin        ]          │
   │ 解析线路: [默认        ▼]          │
   │ 记录值:   [cname.vercel-          │
   │            dns.com      ]          │
   │ TTL:      [10分钟       ▼]          │
   │                                     │
   │ [确认]                              │
   └─────────────────────────────────────┘

5. 保存成功
   ┌─────────────────────────────────────┐
   │ ✅ 添加成功                         │
   │                                     │
   │ 解析记录列表：                       │
   │ ┌─────────────────────────────┐    │
   │ │ admin  | CNAME | cname... │    │
   │ └─────────────────────────────┘    │
   └─────────────────────────────────────┘
```

---

## 🖼️ 步骤 5：验证 DNS 生效

```
检查 DNS 解析状态：

1. 打开命令提示符 (CMD)
   Win + R → 输入 cmd → 回车

2. 执行 DNS 检查命令
   ┌─────────────────────────────────────┐
   │ C:\Users\User> nslookup             │
   │ > admin.aizhixuan.com.cn           │
   └─────────────────────────────────────┘

3. 预期输出（DNS 未生效）
   ┌─────────────────────────────────────┐
   │ 服务器:  UnKnown                    │
   │ Address:  ::1                       │
   │                                     │
   │ *** 请求超时                        │
   └─────────────────────────────────────┘
   ⚠️  DNS 还未生效，继续等待

4. 预期输出（DNS 已生效）
   ┌─────────────────────────────────────┐
   │ 服务器:  UnKnown                    │
   │ Address:  ::1                       │
   │                                     │
   │ 名称:    admin.aizhixuan.com.cn     │
   │ Address:  76.76.21.21               │
   │ Aliases:  cname.vercel-dns.com      │
   └─────────────────────────────────────┘
   ✅ DNS 已生效，可以继续验证部署

5. 如果 DNS 未生效
   → 等待 5-10 分钟
   → 重新执行 nslookup 检查
   → 最多等待 48 小时
```

---

## 🖼️ 步骤 6：访问超管端

```
访问超管端流程：

1. 打开浏览器
   Chrome / Edge / Firefox

2. 输入地址
   ┌─────────────────────────────────────┐
   │ https://admin.aizhixuan.com.cn     │
   │                                     │
   │ [访问]                              │
   └─────────────────────────────────────┘

3. 预期结果 - 登录页面
   ┌─────────────────────────────────────┐
   │          PulseOpti HR               │
   │      超管端登录                      │
   │                                     │
   │  ┌──────────────────────────┐       │
   │  │ 邮箱                     │       │
   │  │ [________________]       │       │
   │  │                          │       │
   │  │ 密码                     │       │
   │  │ [________________]       │       │
   │  │                          │       │
   │  │          [登录]          │       │
   │  └──────────────────────────┘       │
   │                                     │
   │  还没有账号？[立即注册]             │
   └─────────────────────────────────────┘
   ✅ 登录页面显示正常

4. 如果显示 404 错误
   ┌─────────────────────────────────────┐
   │  404                                │
   │  Not Found                          │
   │                                     │
   │  The requested URL was not found.   │
   └─────────────────────────────────────┘
   ⚠️  DNS 可能还未生效，继续等待
```

---

## 🖼️ 步骤 7：创建管理员账号

```
创建管理员账号流程：

1. 点击"立即注册"
   ┌─────────────────────────────────────┐
   │          PulseOpti HR               │
   │      超管端注册                      │
   │                                     │
   │  ┌──────────────────────────┐       │
   │  │ 邮箱                     │       │
   │  │ [208343256@qq.com    ]  │       │
   │  │                          │       │
   │  │ 密码                     │       │
   │  │ [admin123          ]    │       │
   │  │                          │       │
   │  │ 确认密码                 │       │
   │  │ [admin123          ]    │       │
   │  │                          │       │
   │  │ 姓名                     │       │
   │  │ [超级管理员        ]    │       │
   │  │                          │       │
   │  │ 手机（可选）             │       │
   │  │ [13800138000      ]    │       │
   │  │                          │       │
   │  │          [注册]          │       │
   │  └──────────────────────────┘       │
   └─────────────────────────────────────┘

2. 点击"注册"
   ↓

3. 注册成功
   ┌─────────────────────────────────────┐
   │  ✅ 注册成功                        │
   │                                     │
   │  正在跳转到登录页面...               │
   └─────────────────────────────────────┘

4. 自动跳转到登录页面
   ↓
   输入刚才注册的账号密码登录
```

---

## 🖼️ 步骤 8：测试数据同步

```
测试数据同步流程：

1. 在前端注册用户
   访问：https://www.aizhixuan.com.cn/register

   ┌─────────────────────────────────────┐
   │          PulseOpti HR               │
   │      前端注册                        │
   │                                     │
   │  邮箱: [test@example.com    ]      │
   │  密码: [test123              ]      │
   │  姓名: [测试用户             ]      │
   │                                     │
   │  [注册]                              │
   └─────────────────────────────────────┘
   ↓
   ✅ 注册成功

2. 在超管端查看用户
   访问：https://admin.aizhixuan.com.cn/admin/users

   ┌─────────────────────────────────────┐
   │  超管端 - 用户管理                   │
   │                                     │
   │  用户列表：                          │
   │  ┌─────────────────────────────┐    │
   │  │ 邮箱        │ 姓名  │ 操作 │    │
   │  ├─────────────────────────────┤    │
   │  │ 208343256@qq.com │ 超级管理员 │ [详情] │    │
   │  │ test@example.com │ 测试用户   │ [详情] │    │
   │  └─────────────────────────────┘    │
   └─────────────────────────────────────┘
   ↓
   ✅ 能看到刚注册的测试用户

3. 数据同步验证完成
   ✅ 前端和超管端数据实时同步成功！
```

---

## 📊 完整时间线

```
0:00    开始准备
        ↓
0:02    进入项目目录
        ↓
0:03    执行脚本
        ↓
0:05    Vercel 登录完成
        ↓
0:10    脚本自动部署完成
        ↓
0:12    配置 DNS 记录
        ↓
0:15    DNS 配置完成
        ↓
5:15    等待 DNS 生效（5分钟）
        ↓
5:20    验证 DNS 生效
        ↓
5:25    访问超管端
        ↓
5:28    创建管理员账号
        ↓
5:30    登录超管端
        ↓
5:35    测试数据同步
        ↓
5:40    ✅ 部署完成

总计：约 5-10 分钟（不含 DNS 生效等待时间）
```

---

## ✅ 最终检查清单

部署完成后，逐一确认：

```
□ 访问 https://admin.aizhixuan.com.cn 成功
□ 显示超管端登录页面
□ 可以创建管理员账号
□ 可以登录管理员账号
□ 显示超管端仪表盘
□ 前端注册的用户在超管端可见
□ 前端创建的数据在超管端可见
□ 运行 verify-data-sync.bat 所有检查通过
```

---

**指南版本**：v1.0.0
**更新时间**：2024-12-19
