# 人效监测闭环系统

## 系统概述

本系统实现了从"实时人效监测→数据归因→预测干预→赋能驱动"的完整闭环路径，为企业构建"提质增效"业绩倍增的系统。

## 核心功能

### 1. 实时人效监测

**功能描述：**
- 全方位监控企业人效关键指标
- 支持指标分类管理（生产力、成本、留存、增长）
- 自动计算指标值并生成历史快照
- 智能预警机制，支持自定义预警规则

**核心指标：**
- 生产力指标：人均产值、人均利润、人均项目数
- 成本指标：人力成本占比、人均培训成本
- 留存指标：员工离职率、新员工留存率、平均司龄
- 增长指标：人员增长率、收入增长率

**API接口：**
- `GET /api/efficiency/dashboard` - 获取仪表盘数据
- `POST /api/efficiency/dashboard` - 触发指标计算和预警检查

### 2. 数据归因分析

**功能描述：**
- 基于豆包大语言模型的深度归因分析
- 从外部环境、内部运营、人员因素、资源因素多维度分析
- 识别关键影响因素并评估置信度
- 提供具体的改进建议和关键洞察

**分析维度：**
1. 外部环境因素（市场、行业、政策等）
2. 内部运营因素（组织结构、流程、管理）
3. 人员因素（能力、激励、文化）
4. 资源因素（预算、工具、培训）

**API接口：**
- `POST /api/efficiency/attribution` - 创建归因分析
- `GET /api/efficiency/attribution` - 获取归因分析历史

### 3. 预测干预分析

**功能描述：**
- 基于历史数据和AI预测未来趋势
- 支持多种预测类型（趋势预测、峰值预测、风险预测、机会识别）
- 提供情景分析（乐观、基准、悲观）
- 识别潜在风险并提供缓解措施
- 挖掘潜在机会并给出行动建议

**预测能力：**
- 趋势预测：预测指标的未来变化趋势
- 峰值预测：识别指标的可能峰值点
- 风险预测：识别可能的下降风险
- 机会识别：发现潜在的改善机会

**API接口：**
- `POST /api/efficiency/prediction` - 创建预测分析
- `GET /api/efficiency/prediction` - 获取预测分析历史

### 4. 决策建议与赋能

**功能描述：**
- 基于归因分析和预测结果生成可执行的决策建议
- 提供详细的行动步骤和时间规划
- 评估资源需求和预期影响
- 支持建议的创建、分配、执行和效果跟踪
- 建立决策落地的行动计划机制

**建议类型：**
- 人员留存：降低离职率，提升员工满意度
- 招聘优化：提高招聘效率，降低招聘成本
- 培训发展：提升员工能力，促进人才成长
- 薪酬激励：优化薪酬结构，提升激励效果
- 组织优化：改进组织结构，提升管理效率

**API接口：**
- `POST /api/efficiency/recommendations` - 生成决策建议
- `GET /api/efficiency/recommendations` - 获取决策建议列表

## 数据库表结构

### 1. efficiency_metrics - 人效指标配置表
存储所有人效指标的配置信息，包括计算公式、单位、基准值等。

### 2. efficiency_snapshots - 人效数据快照表
存储历史人效数据快照，用于趋势分析。

### 3. efficiency_alert_rules - 人效预警规则表
配置预警规则，包括监控指标、条件、阈值等。

### 4. efficiency_alerts - 人效预警记录表
记录触发的预警信息。

### 5. attribution_analysis - 归因分析记录表
存储AI归因分析的结果。

### 6. prediction_analysis - 预测分析记录表
存储AI预测分析的结果。

### 7. decision_recommendations - 决策建议记录表
存储生成的决策建议。

### 8. action_plans - 行动计划表
存储决策建议落地的行动计划。

## 使用指南

### 1. 初始化系统

首次使用需要初始化系统，创建数据库表和默认配置：

```bash
curl -X POST http://localhost:5000/api/efficiency/init
```

### 2. 查看仪表盘

访问 `/efficiency` 页面查看人效监测仪表盘，包括：
- 关键指标概览
- 全部指标列表
- 实时预警信息

### 3. 进行归因分析

1. 在仪表盘选择要分析的指标
2. 切换到"数据归因"标签
3. 点击"AI分析"按钮
4. 查看分析结果，包括关键影响因素、改进建议和关键洞察

### 4. 进行预测分析

1. 在仪表盘选择要预测的指标
2. 切换到"预测干预"标签
3. 点击"AI预测"按钮
4. 查看预测结果，包括情景分析和建议措施

### 5. 获取决策建议

1. 在仪表盘选择要生成建议的指标
2. 切换到"决策建议"标签
3. 点击"生成建议"按钮
4. 查看详细建议，包括行动步骤、预期影响等
5. 点击"开始执行"创建行动计划

## 技术架构

### 前端技术栈
- Next.js 16 (App Router)
- React 19
- TypeScript 5
- shadcn/ui 组件库
- Tailwind CSS 4

### 后端技术栈
- Next.js API Routes
- Drizzle ORM
- PostgreSQL
- 豆包大语言模型 (coze-coding-dev-sdk)

### 核心模块

#### 1. EfficiencyManager
人效数据计算引擎，负责：
- 计算各项人效指标
- 保存数据快照
- 检查预警规则
- 生成仪表盘数据

#### 2. AttributionAnalysisManager
归因分析管理器，负责：
- 调用AI进行归因分析
- 保存分析结果
- 计算置信度

#### 3. PredictionAnalysisManager
预测分析管理器，负责：
- 调用AI进行预测分析
- 保存预测结果
- 计算置信度

#### 4. DecisionRecommendationManager
决策建议管理器，负责：
- 调用AI生成决策建议
- 创建建议记录
- 管理行动计划

## AI能力说明

本系统集成了豆包大语言模型的以下能力：

### 1. 深度思考模式
使用 `doubao-seed-1-6-thinking-250715` 模型，启用深度思考能力，确保分析的深度和准确性。

### 2. 多维度归因分析
能够从多个维度（外部环境、内部运营、人员、资源）分析指标变化的原因，识别关键影响因素。

### 3. 智能预测分析
基于历史数据预测未来趋势，提供情景分析和风险识别。

### 4. 可执行建议生成
生成具体、可操作的决策建议，包括详细的行动步骤、资源需求、预期影响等。

## 系统价值

### 1. 数据驱动决策
- 全面的指标体系，覆盖人效各个方面
- 实时监控，及时发现问题和机会
- 基于数据的归因和预测，而非经验判断

### 2. 提升管理效率
- 自动化指标计算，减少人工统计
- 智能预警，提前识别风险
- AI辅助分析，节省分析时间

### 3. 精准干预措施
- 基于归因分析，找到根本原因
- 针对性建议，避免盲目行动
- 情景分析，评估不同方案效果

### 4. 持续优化改进
- 历史数据追踪，观察长期趋势
- 建议效果跟踪，验证措施有效性
- 形成决策闭环，持续迭代优化

## 后续扩展方向

1. **更多指标**：根据行业特点添加更多定制化指标
2. **行业对标**：引入行业基准数据，支持跨企业对比
3. **自动预警**：基于机器学习的异常检测和预警
4. **协同决策**：支持多人协作，讨论和确认建议
5. **效果追踪**：完善行动计划的执行追踪和效果评估

## 联系方式

如有问题或建议，请联系开发团队。
